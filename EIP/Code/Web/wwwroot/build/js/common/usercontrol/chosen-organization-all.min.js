function initSelect(){UtilAjaxPost("/Organization/GetOrganizationTree",{},function(n){$selectObj.jstree({core:{data:n,check_callback:!0,multiple:!0,strings:{"Loading ...":"正在加载..."}},plugins:["types","dnd","search","checkbox"],types:{"default":{icon:"fa  fa-file-text-o"}}}).bind("click.jstree",function(){var n=$selectObj.jstree().get_checked(!0);json="";$.each(n,function(n,t){json+=t.id+","});json!=""&&(json=json.substring(0,json.length-1))}).on("loaded.jstree",function(){if($selectObj.jstree("deselect_all",!0),UE.plugins[thePlugins].editdom&&(oNode=UE.plugins[thePlugins].editdom),oNode){var n=$(oNode);$.each(n.attr("val"),function(n,t){json+=t.id+",";$selectObj.jstree("select_node",t.id,!0)});json!=""&&(json=json.substring(0,json.length-1))}})})}function initEvent(){$("#search").click(function(){$selectObj.jstree(!0).search($("#keywords").val(),!0,!0)})}var $selectObj=null,json="",oNode=null,thePlugins="formorganization",attJSON=parent.formattributeJSON;$(document).ready(function(){$selectObj=$("#select-tree");initSelect();initEvent()});dialog.oncancel=function(){UE.plugins[thePlugins].editdom&&delete UE.plugins[thePlugins].editdom};dialog.onok=function(){if(json.length===0)return DialogTipsMsgWarn("请选择需要操作的数据",1e3),!1;var i=$("[type1^='flow_organization']",editor.document),t=i.size()+1,n='<button type="button" type1="flow_organization" value="{指定组织'+t+'}" style="border:0px;background-color:transparent;width:84px" readonly val="'+json+'">';n+="{指定组织"+t+"}";n+="<\/button>";oNode?($(oNode).after(n),domUtils.remove(oNode,!1)):editor.execCommand("insertHtml",n);delete UE.plugins[thePlugins].editdom};