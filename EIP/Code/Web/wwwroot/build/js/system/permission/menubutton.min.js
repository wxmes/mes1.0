function initEvent(){$("#accessButton").on("click","li",function(){$(this).hasClass("selected")?$(this).attr("class",""):$(this).attr("class","selected")})}function initFunctionTree(){UtilAjaxPostAsync("/Permission/GetMenuHavePermissionByPrivilegeMasterValue",{privilegeMasterValue:$("#privilegeMasterValue").val(),privilegeMaster:$("#privilegeMaster").val(),PrivilegeAccess:Language.privilegeAccess.func},function(n){$("#function-tree").jstree({core:{data:n,strings:{"Loading ...":"正在加载..."}},plugins:["types","dnd"],types:{"default":{icon:"fa fa-tasks"}}}).bind("activate_node.jstree",function(n,t){treeNode=t.node;$(".messagebox").hide();$("#accessButton").show();$("#alertdismiss").hide();$("#accessButton li").hide();checkAll=!0;var i=$("li[modelid='"+treeNode.id+"']").length;i>0?$("li[modelid='"+treeNode.id+"']").show():($(".msg-content").html("【"+treeNode.text+"】无模块按钮权限"),$("#alertdismiss").show())})})}function selectall(){if(treeNode==null){DialogTipsMsgWarn("请选择菜单",1e3);return}var n=$("li[modelid='"+treeNode.id+"']");checkAll?(n.attr("class","selected"),checkAll=!1):(n.attr("class",""),checkAll=!0)}function formSubmit(){var n="",t=$("li[class='selected']").find("a");$.each(t,function(t,i){n+='{"P":"'+i.id+'"},'});n=n.substring(0,n.length-1);n="["+n+"]";UtilAjaxPostWait("/Permission/SavePermission",{privilegeAccess:Language.privilegeAccess.func,privilegeMasterValue:$("#privilegeMasterValue").val(),privilegeMaster:$("#privilegeMaster").val(),menuPermissions:n},function(n){DialogAjaxResult(n);dialog.close()})}function initButtonData(){UtilAjaxPostAsync("/Permission/GetFunctionByPrivilegeMaster",{privilegeMasterValue:$("#privilegeMasterValue").val(),privilegeMaster:$("#privilegeMaster").val()},function(n){$.each(n,function(n,t){var i=' <li title="'+t.Name+'" data-toggle="tooltip" modelid="'+t.MenuId+'"  class="'+t.Remark+'"><a id="'+t.MenuButtonId+'"><i class="'+t.Icon+'"><\/i>'+t.Name+'<\/a><i class="check"><\/i><\/li>';$("#accessButton").append(i)})})}$(function(){initEvent();initFunctionTree();initButtonData()});var checkAll=!0,treeNode=null;