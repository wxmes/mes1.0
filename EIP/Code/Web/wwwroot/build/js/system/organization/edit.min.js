function initForm(){$("#editform").formValidation({message:"请输入有效值",trigger:"blur",fields:{Name:{validators:{notEmpty:{message:"请输入全称"}}},OrderNo:{validators:{digits:{message:"值不是数字"}}}}}).on("success.form.fv",function(){return UtilAjaxPostWait("/Organization/SaveOrganization",$form.form().getFormSimpleData(),function(n){perateStatus(n);dialog.close()}),!1})}function getById(){var n=$("#OrganizationId").val();n!=""&&UtilAjaxPostWait("/Organization/GetById",{id:n},function(n){$form.form().initFormData(n)})}function initSelect(){UtilAjaxPost("/UserControl/GetOrganizationTreeRemoveChildren",{organizationId:$("#OrganizationId").val()},function(n){$selectObj.jstree({core:{data:n,strings:{"Loading ...":"正在加载..."}},plugins:["types","dnd","search"],types:{"default":{icon:"fa  fa-file-text-o"}}}).bind("activate_node.jstree",function(n,t){$("#ParentId").val(t.node.id);$parentName.val(t.node.text).focus().blur();hideSelect()})})}function initEvent(){$("#searchValue").on("click",function(){search($("#searchValueKey").val())});$("#searchValueKey").on("keyup",function(){search($(this).val())});$("#menuBtn,#ParentName").on("click",function(){showSelect()})}function showSelect(){var i=$parentName,n=$parentName.offset(),t=$("#editform").offset();$("#content").css({left:n.left-t.left+"px",top:n.top+i.outerHeight()+2-t.top+"px"}).slideDown("fast");$("body").bind("mousedown",onBodyDown)}function hideSelect(){$("#content").fadeOut("fast");$("body").unbind("mousedown",onBodyDown)}function onBodyDown(n){n.target.id==="menuBtn"||n.target.id==="content"||$(n.target).parents("#content").length>0||hideSelect()}function search(n){$selectObj.jstree(!0).search(n,!0,!0)}function initWith(){$("#input-group").width($parentName.width()+40)}var $form,$selectObj,$parentName;$(function(){$form=$("#editform");initForm();getById()});$selectObj=null;$(document).ready(function(){$selectObj=$("#select-tree");$parentName=$("#ParentName");initSelect();initEvent();setTimeout("initWith()",100)});