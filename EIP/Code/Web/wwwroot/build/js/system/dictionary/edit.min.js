function initForm(){$form.formValidation({message:"请输入有效值",trigger:"blur",fields:{Name:{validators:{notEmpty:{message:"请输入名称"}}}}}).on("success.form.fv",function(){var n=$form.form().getFormSimpleData();return n.DictionaryId=n.IsCopy==="0"?n.DictionaryId:null,UtilAjaxPostWait("/Dictionary/SaveDictionary",n,function(n){perateStatus(n);dialog.close()}),!1})}function getById(){var n=$dictionaryId.val();n!=""&&UtilAjaxPostWait("/Dictionary/GetById",{id:n},function(n){$form.form().initFormData(n)})}function initSelect(){UtilAjaxPost("/UserControl/GetDictionaryRemoveChildren",{id:$dictionaryId.val()},function(n){$selectObj.jstree({core:{data:n,strings:{"Loading ...":"正在加载..."}},plugins:["types","search"],types:{"default":{icon:"fa  fa-file-text-o"}}}).bind("activate_node.jstree",function(n,t){$parentId.val(t.node.id);$parentName.val(t.node.text).focus().blur();hideSelect()})})}function initEvent(){$("#searchValue").on("click",function(){search($("#searchValueKey").val())});$("#searchValueKey").on("keyup",function(){search($(this).val())});$("#menuBtn,#ParentName").on("click",function(){showSelect()})}function showSelect(){var i=$parentName,n=$parentName.offset(),t=$form.offset();$content.css({left:n.left-t.left+"px",top:n.top+i.outerHeight()+2-t.top+"px"}).slideDown("fast");$("body").bind("mousedown",onBodyDown)}function hideSelect(){$content.fadeOut("fast");$("body").unbind("mousedown",onBodyDown)}function onBodyDown(n){n.target.id==="menuBtn"||n.target.id==="content"||$(n.target).parents("#content").length>0||hideSelect()}function search(n){$selectObj.jstree(!0).search(n,!0,!0)}function initWith(){$("#input-group").width($parentName.width()+40)}var $selectObj=null,$parentName,$content,$inputGroup,$parentId,$dictionaryId,$form;$(function(){$form=$("#editform");initForm();$selectObj=$("#select-tree");$parentName=$("#ParentName");$parentId=$("#ParentId");$content=$("#content");$inputGroup=$("#input-group");$dictionaryId=$("#DictionaryId");initSelect();initEvent();getById();setTimeout("initWith()",100)});