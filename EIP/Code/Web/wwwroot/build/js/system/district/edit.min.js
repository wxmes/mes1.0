function initForm(){var n=$form.form();$form.formValidation({message:"请输入有效值",trigger:"blur",fields:{Name:{validators:{notEmpty:{message:"请输入名称"}}},DistrictId:{validators:{notEmpty:{message:"请输入代码"}}}}}).on("success.form.fv",function(){var t=n.getFormSimpleData();return t.ParentId=t.parentName!==""?t.ParentId:"",UtilAjaxPostWait("/District/SaveDistrict",n.getFormSimpleData(),function(){DialogAjaxResult(t)&&(reload(!0),dialog.close())}),!1})}function getById(){var n=$("#DistrictId").val();n!=""&&UtilAjaxPostWait("/District/GetDistrictById",{id:n},function(n){$form.form().initFormData(n)})}function initEditTree(){$selectObj.jstree({core:{data:function(n,t){var i=n.id;UtilAjaxPostWait("/District/GetDistrictTreeByParentId",{id:i=="#"?"0":i},function(n){t.call(this,n)})}},plugins:["types"],types:{"default":{icon:"fa fa-file-text-o"}}}).bind("activate_node.jstree",function(n,t){$parentId.val(t.node.id);$parentName.val(t.node.text).focus().blur();hideEditSelect()})}function initEvent(){$("#menuBtn,#ParentName").on("click",function(){showEditSelect()})}function showEditSelect(){var i=$parentName,n=$parentName.offset(),t=$("#editform").offset();$("#content").css({left:n.left-t.left+"px",top:n.top+i.outerHeight()+2-t.top+"px"}).slideDown("fast");$("body").bind("mousedown",onBodyDown)}function hideEditSelect(){$("#content").fadeOut("fast");$("body").unbind("mousedown",onBodyDown)}function onBodyDown(n){n.target.id==="menuBtn"||n.target.id==="content"||$(n.target).parents("#content").length>0||hideEditSelect()}function initWith(){$("#input-group").width($parentName.width()+40)}var $form=$("#editform"),$selectObj=null,$parentName,$parentId;$(document).ready(function(){$selectObj=$("#select-district-tree");$parentName=$("#ParentName");$parentId=$("#ParentId");initEvent();setTimeout("initWith()",100);initForm();getById();initEditTree()});